## アプリケーション名
BookDiary

## アプリケーション概要
読んだ本の感想を書いて保存することが出来るアプリケーションです。本を検索して詳細な書籍情報を取得することも出来ます。
<br>また、読書履歴からお薦めの本を紹介してもらうことも出来ます。

## URL
https://book-diary-42117.onrender.com

## テスト用アカウント
Basic認証アカウント：admin42117
<br>Basic認証パスワード：pass42117
<br>テスト用Email：test@mail.com
<br>テスト用Password：testpass12

## 利用方法
### 本を検索する機能、本の感想を投稿する機能の使い方
1. URLにアクセスし、ヘッダー右上の「ログイン」ボタンからログイン画面に移動します。
2. テスト用アカウントを使用しログインします。
3. トップページに本のタイトル・著者・isbnのいずれかの情報を入力して「検索」ボタンを押下します（タイトルと著者は組み合わせて検索できます）。
4. 検索結果から自分が読んだ本のタイトルまたは画像を押下すると感想投稿ページに遷移するので、自分が思ったジャンル1・自分が思ったジャンル2・あらすじ・感想を入力して「投稿」ボタンを押下します。
※自分が思ったジャンル1・感想は入力必須です。
※あらすじは自分で書き直すこともできます。
5. 自動的にマイページに遷移し、自分が今まで投稿した感想が一覧で表示されます。

### マイページ機能、本の感想の詳細を確認する機能、本の感想を編集する機能、本の感想を削除する機能の使い方
1. URLにアクセスし、ヘッダー右上の「ログイン」ボタンからログイン画面に移動します。
2. テスト用アカウントを使用しログインします。
3. ヘッダー右上のユーザー名が書かれたボタンを押下するとマイページに遷移し、自分が今まで投稿した感想が一覧で表示されます。
4. 本の感想の右上にある「詳細」ボタンを押下すると、本の感想の詳細を確認することが出来ます。
5. 本の感想の右上にある「編集」ボタンを押下すると、感想編集ページに遷移し、すでに投稿した本の感想を編集することが出来ます。
編集後に「編集」ボタンを押下すると編集内容が更新され、マイページへ遷移します。
6. 本の感想の右上にある「削除」ボタンを押下すると、投稿した本の感想を削除することが出来ます。

### 読書履歴からお薦めの本を検索する機能の使い方
1. URLにアクセスし、ヘッダー右上の「ログイン」ボタンからログイン画面に移動します。
2. テスト用アカウントを使用しログインします。
3. ヘッダー右上のユーザー名が書かれたボタンを押下してマイページに遷移し、「読書履歴からお薦めの本を検索」ボタンを押下します。
4. 「最も多く読まれたジャンルの本」と「最も多く読まれた著者の本」がお薦めとして一覧で表示されます。

### AIを活用した読書履歴からお薦めの本を検索する機能の使い方
1. URLにアクセスし、ヘッダー右上の「ログイン」ボタンからログイン画面に移動します。
2. テスト用アカウントを使用しログインします。
3. ヘッダー右上のユーザー名が書かれたボタンを押下してマイページに遷移し、「AIを使って読書履歴からお薦めの本を検索」ボタンを押下します。
4. 「AIがお薦めする本」がお薦めとして一覧で表示されます。

## アプリケーションを作成した背景
- 図書館で本を借りるときに次何を読もうか悩んだり、借りた本が読んでみて面白くなかったことがあったので、過去の読書の好みからお薦めの本を検索してくれるアプリケーションを作成しようと思いました。
- せっかく読んだのだから本の感想を記録に残したい、という想いもありBookDiaryを作成しました。

## 実装した機能についての画像やGIFおよびその説明
- 本を検索する機能<br>
<img src="https://i.gyazo.com/0c814f866a27362e7e115fd7b034c5d5.gif" width="410" />

- 本の感想を投稿する機能<br>
<img src="https://i.gyazo.com/a9054e2fa344ac4bf8d670353dbd0ad0.gif" width="410" />

- 読書履歴からお薦めの本を検索する機能<br>
<img src="https://i.gyazo.com/1984ac33fedffe6e5c2894f8279dc2bc.gif" width="410" />

- AIを使った読書履歴からお薦めの本を検索する機能<br>
<img src="https://i.gyazo.com/f4ecca4c4c6c5b9dcb397c2eb41c7430.gif" width="410" />

## 実装予定の機能
- AIを使った読書履歴からお薦めの本を検索する機能の精度の向上

## データベース設計
- usersテーブル：ユーザー情報を管理
- reviewsテーブル：本の感想、タイトルなどの書籍情報を管理<br>
<img width="307" alt="Image" src="https://i.gyazo.com/6f841ffb6a9dfe4264d3100d98475d2a.png" />

## 開発環境
| 項目               | バージョン・サービス |
|------------------|-----------------|
| **言語**        | Ruby 3.2.0 |
| **フレームワーク** | Ruby on Rails 7.1.5.1 |
| **データベース**  | PostgreSQL（本番） / MySQL（開発） |
| **フロントエンド** | HTML / CSS |
| **テキストエディタ**    | VS Code |
| **認証機能**    | Devise |
| **テスト**    | RSpec / FactoryBot |
| **API**    | RakutenBooksAPI、CohereAPI(command-r-plus) |
| **デプロイ環境** | Render |
| **バージョン管理** | GitHub |

## 工夫したポイント
 - 本の検索：RakutenBooksAPIを使用し、正確な本の情報を検索できるようにしました。
 - ユーザーによるジャンル入力：読んだ本のジャンルと実際に自分が感じたジャンルに乖離があると感じ、本の感想を投稿する際にユーザー自身でジャンルを決定できるようにしました。
 - お薦めの本を検索：読書履歴から「最も多く読まれたジャンルの本」と「最も多く読まれた著者の本」の中でも評価やレビュー数が高い物を優先的に検索してくるロジックを組みました。また、一部RakutenBooksAPIに存在しないジャンルはあらすじから推測して検索するようにしました。
 - AIを使ってお薦めの本を検索：AI（CohereAPI）を使って読書履歴からお薦めの本を検索できるようにしました。返答に余計な情報を含まないような定型文を作成するのに少し時間を要しました。
  - キャッシュに一度検索したジャンルを1日保管し、なおかつ一度に最大5冊の本のジャンルを同時検索できるように修正し、本の検索時間を大幅に短縮（修正前の1/3）しました。

## 制作時間
- 設計書の作成や情報収集               ：1週間
- コーディング、テスト、発表資料作成：2週間